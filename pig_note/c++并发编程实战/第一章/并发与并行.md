# 计算机系统中的并发与并行
多核机器能够实现真并发，即同一系统总，多个独立活动同时进行，而并非依次进行。单核机器只能实现伪并发，即划分时间片分配给各个不同活动，每个时间片之间的切换都涉及一些开销(保存现场，恢复现场，上下文切换)。 
即使是多核机器，也可以在每个核上开线程来实现伪并发，但最多开线程数受制于硬件芯片本身。

## 并发的方式
并发的方式一般分为多进程和多线程。

* 多进程一般通过常规的进程间通信来传递信息(信号，套接字，文件，管道等)，但其存在一些短板，如设置复杂，速度慢，或二者兼有，因为操作系统在多进程之间提供防护措施。避免某个进程意外改动到了其他进程内部数据，同时还有一个短处，运行多个进程的固定开销较大，进程启动花费大量时间。优点也很明显，操作系统在进程间提供了额外保护和高级通信机制。这就意味着，相比多线程，多进程更能写出安全的代码。

* 多线程指的是在单一进程内运行多个线程来实现并发，线程非常像轻量级的进程：每个线程都能独立运行，且能够执行不同的指令序列。不过同一进程内的所有线程共享相同的地址空间，且所有线程都能直接访问大部分的数据，全局变量依然全局可见。指向对象或数据的指针和引用能够在线程间随意传递。但这种方式更加危险，一旦设计不好就容易造成严重的后果。

## 并行与并发
* 并行：并行更强调性能，主要关心的是利用可调配的硬件资源提升大规模数据处理的性能。
* 并发：主要关心的是分离关注点或响应能力，更考虑到系统设计相关。

并发的目的其实就是对一个大的任务做细分，分成多个独立的小的任务。并行则是利用现有的并发规则优化性能。增强性能的并发方式有两种：
1. 将单一任务拆解成多个部分，各自并行运作，从而节省总运行耗时，此方式即为***任务并行***。这其中可能涉及非常复杂的处理方式，因为任务的各个部分也许存在各种依赖关系。任务的分解可以针对处理过程，调度某线程运行同一算法的某部分，另一线程则运行其他部分。

2. 利用并行资源解决规模更大的问题，例如只要条件合适，便同时处理2个文件，10个文件或者更多。而不是每次一个，同时对多组数据执行一样的操作，实际上是采用了***数据并行***。着眼点有别于任务并行，这种方式并行方式本质上是加快了数据处理，同一时间能够 有更大的数据吞吐量。




